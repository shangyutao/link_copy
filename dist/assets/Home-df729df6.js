import{_ as ue,I as de}from"./index-9d9b4f05.js";/* empty css              */import{u as ve,v as pe,r as me}from"./clipboard-aaacd934.js";/* empty css              */import{K as fe,L as ge,r as n,c as u,a as _e,o as ye,w as he,B as o,C as g,D as t,E as ke,j as d,M as b,N as be,O as w,G as C,P as _,Q as R,F as H,R as W,t as x}from"./vendor-0fdb20b8.js";import{s as r,a as we,B as Te,F as Ie,T as Ce,I as xe,L as Pe}from"./vant-b07c73d6.js";import"./utils-917b1704.js";const Ve=v=>{if(!v||typeof v!="string")return!1;try{return new URL(v),!0}catch{return[/douyin\.com/i,/dy\.com/i,/bilibili\.com/i,/b23\.tv/i,/youtube\.com/i,/youtu\.be/i].some(B=>B.test(v))}},Le=v=>{if(!v)return null;const i=v.toLowerCase();return i.includes("douyin.com")||i.includes("dy.com")?"douyin":i.includes("bilibili.com")||i.includes("b23.tv")?"bilibili":i.includes("youtube.com")||i.includes("youtu.be")?"youtube":i.includes("tiktok.com")?"tiktok":null};const Ne={class:"home-page"},Se={class:"container"},Be={class:"header animate-fade-in-up"},Fe={class:"main-content"},Ae={class:"input-section animate-fade-in-up"},De={class:"input-card card-floating"},Me={class:"input-area"},Ue={class:"input-actions"},ze={key:0,class:"platform-hint"},Ee={key:0,class:"progress-section animate-fade-in-up"},Re={class:"progress-card card-floating"},He={class:"progress-header"},We={class:"progress-icon"},$e={class:"progress-content"},je={key:0,class:"progress-bar-container"},Ge={class:"progress-bar"},Ke={class:"progress-text"},Oe={class:"platforms-section animate-fade-in-up"},Qe={class:"platforms-card card-floating"},qe={class:"platforms-grid"},Je={class:"platform-name"},Xe={class:"features-section animate-fade-in-up"},Ye={class:"features-card card-floating"},Ze={class:"features-grid"},et={class:"feature-icon"},tt={class:"feature-content"},st={__name:"Home",setup(v){const i=fe(),B=ge(),a=ve(),h=n(""),P=n(""),V=n(!1),F=n(!1),A=n(!1),c=n(0),L=n(null),T=n(null),N=n(!1),p=n("desktop"),k=n(null),m=n(!1),M=u(()=>{const e=h.value||"";return typeof e=="string"&&e.trim().length>0&&Ve(e)}),U=u(()=>S.value||V.value||a.isDownloading),z=u(()=>navigator.clipboard&&window.isSecureContext),$=u(()=>a.currentTask&&a.currentTask.status!=="idle"),S=u(()=>{var e;return["pending","downloading","transcribing"].includes((e=a.currentTask)==null?void 0:e.status)}),j=u(()=>{var e;return((e=a.currentTask)==null?void 0:e.status)==="completed"}),G=u(()=>{var e;return((e=a.currentTask)==null?void 0:e.status)==="failed"}),K=u(()=>{if(!a.currentTask)return"";switch(a.currentTask.status){case"pending":return"ä»»åŠ¡å‡†å¤‡ä¸­";case"downloading":return"è§†é¢‘è§£æä¸­";case"transcribing":return"éŸ³é¢‘è½¬æ–‡æ¡ˆä¸­";case"completed":return"å¤„ç†å®Œæˆ";case"failed":return"å¤„ç†å¤±è´¥";default:return""}}),O=u(()=>{if(!a.currentTask)return"";switch(a.currentTask.status){case"pending":return"æ­£åœ¨åˆ›å»ºä¸‹è½½ä»»åŠ¡...";case"downloading":return"æ­£åœ¨ä¸‹è½½è§†é¢‘æ–‡ä»¶...";case"transcribing":return"æ­£åœ¨è½¬æ¢éŸ³é¢‘ä¸ºæ–‡æ¡ˆ...";case"completed":return"æ‰€æœ‰å¤„ç†æ­¥éª¤å·²å®Œæˆ";case"failed":return a.currentTask.errorMessage||"å¤„ç†è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯";default:return""}}),D=n([{name:"douyin",displayName:"æŠ–éŸ³",icon:"music-o",color:"#000000"},{name:"bilibili",displayName:"å“”å“©å“”å“©",icon:"video-o",color:"#fb7299"}]),Q=n([{name:"æ™ºèƒ½è§£æ",description:"è‡ªåŠ¨è¯†åˆ«è§†é¢‘å¹³å°ï¼Œå¿«é€Ÿè§£æä¸‹è½½é“¾æ¥",icon:"search"},{name:"é«˜æ¸…ä¸‹è½½",description:"æ”¯æŒå¤šç§åˆ†è¾¨ç‡ï¼Œä¿è¯è§†é¢‘è´¨é‡",icon:"down"},{name:"éŸ³é¢‘è½¬æ–‡æ¡ˆ",description:"åˆ©ç”¨AIæŠ€æœ¯å°†è§†é¢‘éŸ³é¢‘è½¬æ¢ä¸ºæ–‡å­—",icon:"volume-o"},{name:"æ–‡æ¡ˆä¼˜åŒ–",description:"æ™ºèƒ½ä¼˜åŒ–æ–‡æ¡ˆå†…å®¹ï¼Œæå‡å¯è¯»æ€§",icon:"edit"}]),E=e=>{const s=String(e||"");h.value=s,P.value=Le(s)},q=()=>{},J=()=>{},X=async()=>{if(!z.value){r("å½“å‰ç¯å¢ƒä¸æ”¯æŒå‰ªè´´æ¿æ“ä½œ");return}try{F.value=!0;const e=await me();e?(h.value=e,E(e),r("ç²˜è´´æˆåŠŸ")):r("å‰ªè´´æ¿ä¸ºç©º")}catch(e){console.error("ç²˜è´´å¤±è´¥:",e),r("ç²˜è´´å¤±è´¥")}finally{F.value=!1}},Y=async()=>{if(!M.value){r("è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥");return}try{V.value=!0,c.value=0;const e=String(h.value||"").trim();if(!e)throw new Error("è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥");await a.createTask(e),ee(),r("ä»»åŠ¡åˆ›å»ºæˆåŠŸ")}catch(e){console.error("åˆ›å»ºä»»åŠ¡å¤±è´¥:",e),r("åˆ›å»ºä»»åŠ¡å¤±è´¥: "+e.message)}finally{V.value=!1}},Z=async()=>{try{await we({title:"ç¡®è®¤å–æ¶ˆ",message:"ç¡®å®šè¦å–æ¶ˆå½“å‰ä»»åŠ¡å—ï¼Ÿ"}),A.value=!0,await a.cancelTask(),I(),r("ä»»åŠ¡å·²å–æ¶ˆ")}catch(e){e!=="cancel"&&(console.error("å–æ¶ˆä»»åŠ¡å¤±è´¥:",e),r("å–æ¶ˆä»»åŠ¡å¤±è´¥"))}finally{A.value=!1}},ee=()=>{T.value||(te(),T.value=setInterval(async()=>{var e;if(!((e=a.currentTask)!=null&&e.taskId)){I();return}try{await a.updateTaskStatus(),["completed","failed"].includes(a.currentTask.status)&&(I(),a.currentTask.status==="completed"&&(c.value=100,setTimeout(()=>{i.push(`/preview/${a.currentTask.taskId}`)},500)))}catch(s){console.error("è½®è¯¢çŠ¶æ€å¤±è´¥:",s)}},5e3))},te=()=>{c.value=0,L.value=setInterval(()=>{if(c.value<99){const e=Math.max(.5,(99-c.value)*.1);c.value=Math.min(99,c.value+e)}},200)},se=()=>{L.value&&(clearInterval(L.value),L.value=null)},I=()=>{T.value&&(clearInterval(T.value),T.value=null),se()},ae=()=>{const e=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(e)?p.value="ios":/android/.test(e)?p.value="android":p.value="desktop"},ne=async()=>{if(console.log("ğŸ¯ ç”¨æˆ·ç‚¹å‡»å®‰è£…æŒ‰é’®"),console.log("è®¾å¤‡ç±»å‹:",p.value),console.log("æ˜¯å¦æ”¯æŒè‡ªåŠ¨å®‰è£…:",m.value),m.value&&p.value==="android"&&k.value)try{console.log("ğŸš€ æ‰§è¡Œä¸€é”®å®‰è£…"),k.value.prompt();const{outcome:e}=await k.value.userChoice;console.log("ç”¨æˆ·é€‰æ‹©:",e),e==="accepted"?(console.log("âœ… ç”¨æˆ·æ¥å—äº†å®‰è£…"),r({message:"å®‰è£…æˆåŠŸï¼è¯·åœ¨æ¡Œé¢æŸ¥çœ‹åº”ç”¨",type:"success",duration:3e3})):(console.log("âŒ ç”¨æˆ·æ‹’ç»äº†å®‰è£…"),r({message:"å®‰è£…å·²å–æ¶ˆ",type:"fail",duration:2e3})),k.value=null,m.value=!1}catch(e){console.error("å®‰è£…å¤±è´¥:",e),r({message:"å®‰è£…å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨æ·»åŠ åˆ°ä¸»å±å¹•",type:"fail",duration:3e3}),N.value=!0}else console.log("ğŸ“± æ˜¾ç¤ºå®‰è£…æŒ‡å¼•"),N.value=!0},oe=e=>{const s=D.value.find(f=>f.name===e);return(s==null?void 0:s.icon)||"play-circle"},le=e=>{const s=D.value.find(f=>f.name===e);return(s==null?void 0:s.displayName)||e};return _e(()=>{var e;(e=a.currentTask)!=null&&e.taskId&&(console.log("é¡µé¢åˆ·æ–°ï¼Œæ¸…ç†ä¹‹å‰çš„ä»»åŠ¡:",a.currentTask.taskId),pe.cleanTask(a.currentTask.taskId)),ae(),window.addEventListener("beforeinstallprompt",s=>{console.log("ğŸ¯ æ£€æµ‹åˆ°PWAå®‰è£…æç¤ºäº‹ä»¶"),s.preventDefault(),k.value=s,m.value=!0,console.log("âœ… æ”¯æŒä¸€é”®å®‰è£…åŠŸèƒ½")}),window.addEventListener("appinstalled",()=>{console.log("ğŸ‰ PWAå®‰è£…å®Œæˆ"),k.value=null,m.value=!1,r({message:"åº”ç”¨å®‰è£…æˆåŠŸï¼",type:"success",duration:3e3})})}),ye(()=>{I()}),he(()=>B.path,()=>{I()}),(e,s)=>{const f=Te,re=Ie,y=xe,ie=Ce,ce=Pe;return o(),g("div",Ne,[s[9]||(s[9]=t("div",{class:"bg-decoration"},[t("div",{class:"decoration-circle circle-1"}),t("div",{class:"decoration-circle circle-2"}),t("div",{class:"decoration-circle circle-3"})],-1)),t("div",Se,[t("header",Be,[s[2]||(s[2]=ke('<div class="logo" data-v-7a847287><div class="logo-icon glow-effect" data-v-7a847287><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-7a847287><path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z" stroke="currentColor" stroke-width="1.5" fill="none" data-v-7a847287></path><path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5" fill="none" data-v-7a847287></path></svg></div><div class="logo-text" data-v-7a847287><h1 class="gradient-text" data-v-7a847287>Link Copy</h1><p data-v-7a847287>æ™ºèƒ½è§†é¢‘è§£æä¸æ–‡æ¡ˆæå–</p></div></div>',1)),d(f,{class:be(["install-btn","btn-glass",{"auto-install":m.value&&p.value==="android"}]),icon:m.value&&p.value==="android"?"plus":"wap-home-o",onClick:ne},{default:b(()=>[x(_(m.value&&p.value==="android"?"ä¸€é”®å®‰è£…":"æ·»åŠ åˆ°æ¡Œé¢"),1)]),_:1},8,["class","icon"])]),t("main",Fe,[t("div",Ae,[t("div",De,[s[5]||(s[5]=t("div",{class:"input-header"},[t("h2",null,"ç²˜è´´è§†é¢‘é“¾æ¥"),t("p",null,"æ”¯æŒæŠ–éŸ³ã€å“”å“©å“”å“©ç­‰ä¸»æµè§†é¢‘å¹³å°")],-1)),t("div",Me,[d(re,{modelValue:h.value,"onUpdate:modelValue":[s[0]||(s[0]=l=>h.value=l),E],type:"textarea",placeholder:"åœ¨æ­¤ç²˜è´´è§†é¢‘é“¾æ¥æˆ–åˆ†äº«æ–‡æœ¬...",rows:"3",maxlength:"2000",disabled:U.value,class:"url-input",onFocus:q,onBlur:J},null,8,["modelValue","disabled"]),t("div",Ue,[z.value?(o(),w(f,{key:0,class:"paste-btn btn-glass",icon:"add-o",onClick:X,loading:F.value},{default:b(()=>s[3]||(s[3]=[x(" ç²˜è´´ ")])),_:1,__:[3]},8,["loading"])):C("",!0),d(f,{type:"primary",class:"submit-btn btn-primary",loading:V.value,disabled:!M.value||U.value,onClick:Y},{icon:b(()=>[d(y,{name:"play-circle"})]),default:b(()=>[s[4]||(s[4]=x(" å¼€å§‹è§£æ "))]),_:1,__:[4]},8,["loading","disabled"])])]),P.value?(o(),g("div",ze,[d(ie,{type:"primary",class:"platform-tag"},{default:b(()=>[d(y,{name:oe(P.value)},null,8,["name"]),x(" æ£€æµ‹åˆ°ï¼š"+_(le(P.value)),1)]),_:1})])):C("",!0)])]),$.value?(o(),g("div",Ee,[t("div",Re,[t("div",He,[t("div",We,[S.value?(o(),w(ce,{key:0,size:"24px",color:"#667eea"})):j.value?(o(),w(y,{key:1,name:"success",color:"#10b981"})):G.value?(o(),w(y,{key:2,name:"cross",color:"#ef4444"})):(o(),w(y,{key:3,name:"clock-o",color:"#f59e0b"}))]),t("div",$e,[t("h3",null,_(K.value),1),t("p",null,_(O.value),1)]),S.value?(o(),w(f,{key:0,size:"small",type:"danger",plain:"",onClick:Z,loading:A.value},{default:b(()=>s[6]||(s[6]=[x(" å–æ¶ˆ ")])),_:1,__:[6]},8,["loading"])):C("",!0)]),S.value?(o(),g("div",je,[t("div",Ge,[t("div",{class:"progress-fill",style:R({width:c.value+"%"})},null,4)]),t("span",Ke,_(Math.round(c.value))+"%",1)])):C("",!0)])])):C("",!0),t("div",Oe,[t("div",Qe,[s[7]||(s[7]=t("div",{class:"platforms-header"},[t("h3",null,"æ”¯æŒå¹³å°"),t("p",null,"æŒç»­æ‰©å±•ä¸­ï¼Œæ›´å¤šå¹³å°å³å°†æ”¯æŒ")],-1)),t("div",qe,[(o(!0),g(H,null,W(D.value,l=>(o(),g("div",{key:l.name,class:"platform-item"},[t("div",{class:"platform-icon",style:R({color:l.color})},[d(y,{name:l.icon},null,8,["name"])],4),t("span",Je,_(l.displayName),1)]))),128))])])]),t("div",Xe,[t("div",Ye,[s[8]||(s[8]=t("div",{class:"features-header"},[t("h3",null,"åŠŸèƒ½ç‰¹æ€§"),t("p",null,"å¼ºå¤§çš„è§†é¢‘å¤„ç†èƒ½åŠ›ï¼Œä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ")],-1)),t("div",Ze,[(o(!0),g(H,null,W(Q.value,l=>(o(),g("div",{key:l.name,class:"feature-item"},[t("div",et,[d(y,{name:l.icon},null,8,["name"])]),t("div",tt,[t("h4",null,_(l.name),1),t("p",null,_(l.description),1)])]))),128))])])])])]),d(de,{modelValue:N.value,"onUpdate:modelValue":s[1]||(s[1]=l=>N.value=l)},null,8,["modelValue"])])}}},ut=ue(st,[["__scopeId","data-v-7a847287"]]);export{ut as default};
//# sourceMappingURL=Home-df729df6.js.map
