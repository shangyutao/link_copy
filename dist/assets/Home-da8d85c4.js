import{_ as ue,I as de}from"./index-2ab10388.js";/* empty css              */import{u as ve,v as pe,r as me}from"./clipboard-431328c5.js";/* empty css              */import{K as fe,L as ge,r as n,c as u,a as _e,o as ye,w as ke,B as o,C as m,D as t,E as he,j as d,M as k,N as h,G as x,O as g,P as H,F as R,Q as W,t as C}from"./vendor-194b799d.js";import{s as r,a as be,B as we,F as Te,T as Ie,I as xe,L as Ce}from"./vant-83faff4e.js";import"./utils-917b1704.js";const Pe=v=>{if(!v||typeof v!="string")return!1;try{return new URL(v),!0}catch{return[/douyin\.com/i,/dy\.com/i,/bilibili\.com/i,/b23\.tv/i,/youtube\.com/i,/youtu\.be/i].some(S=>S.test(v))}},Ve=v=>{if(!v)return null;const i=v.toLowerCase();return i.includes("douyin.com")||i.includes("dy.com")?"douyin":i.includes("bilibili.com")||i.includes("b23.tv")?"bilibili":i.includes("youtube.com")||i.includes("youtu.be")?"youtube":i.includes("tiktok.com")?"tiktok":null};const Le={class:"home-page"},Ne={class:"container"},Se={class:"header animate-fade-in-up"},Be={class:"main-content"},Fe={class:"input-section animate-fade-in-up"},Ae={class:"input-card card-floating"},De={class:"input-area"},Me={class:"input-actions"},Ue={key:0,class:"platform-hint"},Ee={key:0,class:"progress-section animate-fade-in-up"},ze={class:"progress-card card-floating"},He={class:"progress-header"},Re={class:"progress-icon"},We={class:"progress-content"},$e={key:0,class:"progress-bar-container"},je={class:"progress-bar"},Ge={class:"progress-text"},Ke={class:"platforms-section animate-fade-in-up"},Oe={class:"platforms-card card-floating"},Qe={class:"platforms-grid"},qe={class:"platform-name"},Je={class:"features-section animate-fade-in-up"},Xe={class:"features-card card-floating"},Ye={class:"features-grid"},Ze={class:"feature-icon"},et={class:"feature-content"},tt={__name:"Home",setup(v){const i=fe(),S=ge(),a=ve(),_=n(""),P=n(""),V=n(!1),B=n(!1),F=n(!1),c=n(0),L=n(null),b=n(null),A=n(!1),w=n("desktop"),y=n(null),T=n(!1),M=u(()=>{const e=_.value||"";return typeof e=="string"&&e.trim().length>0&&Pe(e)}),U=u(()=>N.value||V.value||a.isDownloading),E=u(()=>navigator.clipboard&&window.isSecureContext),$=u(()=>a.currentTask&&a.currentTask.status!=="idle"),N=u(()=>{var e;return["pending","downloading","transcribing"].includes((e=a.currentTask)==null?void 0:e.status)}),j=u(()=>{var e;return((e=a.currentTask)==null?void 0:e.status)==="completed"}),G=u(()=>{var e;return((e=a.currentTask)==null?void 0:e.status)==="failed"}),K=u(()=>{if(!a.currentTask)return"";switch(a.currentTask.status){case"pending":return"ä»»åŠ¡å‡†å¤‡ä¸­";case"downloading":return"è§†é¢‘è§£æä¸­";case"transcribing":return"éŸ³é¢‘è½¬æ–‡æ¡ˆä¸­";case"completed":return"å¤„ç†å®Œæˆ";case"failed":return"å¤„ç†å¤±è´¥";default:return""}}),O=u(()=>{if(!a.currentTask)return"";switch(a.currentTask.status){case"pending":return"æ­£åœ¨åˆ›å»ºä¸‹è½½ä»»åŠ¡...";case"downloading":return"æ­£åœ¨ä¸‹è½½è§†é¢‘æ–‡ä»¶...";case"transcribing":return"æ­£åœ¨è½¬æ¢éŸ³é¢‘ä¸ºæ–‡æ¡ˆ...";case"completed":return"æ‰€æœ‰å¤„ç†æ­¥éª¤å·²å®Œæˆ";case"failed":return a.currentTask.errorMessage||"å¤„ç†è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯";default:return""}}),D=n([{name:"douyin",displayName:"æŠ–éŸ³",icon:"music-o",color:"#000000"},{name:"bilibili",displayName:"å“”å“©å“”å“©",icon:"video-o",color:"#fb7299"}]),Q=n([{name:"æ™ºèƒ½è§£æ",description:"è‡ªåŠ¨è¯†åˆ«è§†é¢‘å¹³å°ï¼Œå¿«é€Ÿè§£æä¸‹è½½é“¾æ¥",icon:"search"},{name:"é«˜æ¸…ä¸‹è½½",description:"æ”¯æŒå¤šç§åˆ†è¾¨ç‡ï¼Œä¿è¯è§†é¢‘è´¨é‡",icon:"down"},{name:"éŸ³é¢‘è½¬æ–‡æ¡ˆ",description:"åˆ©ç”¨AIæŠ€æœ¯å°†è§†é¢‘éŸ³é¢‘è½¬æ¢ä¸ºæ–‡å­—",icon:"volume-o"},{name:"æ–‡æ¡ˆä¼˜åŒ–",description:"æ™ºèƒ½ä¼˜åŒ–æ–‡æ¡ˆå†…å®¹ï¼Œæå‡å¯è¯»æ€§",icon:"edit"}]),z=e=>{const s=String(e||"");_.value=s,P.value=Ve(s)},q=()=>{},J=()=>{},X=async()=>{if(!E.value){r("å½“å‰ç¯å¢ƒä¸æ”¯æŒå‰ªè´´æ¿æ“ä½œ");return}try{B.value=!0;const e=await me();e?(_.value=e,z(e),r("ç²˜è´´æˆåŠŸ")):r("å‰ªè´´æ¿ä¸ºç©º")}catch(e){console.error("ç²˜è´´å¤±è´¥:",e),r("ç²˜è´´å¤±è´¥")}finally{B.value=!1}},Y=async()=>{if(!M.value){r("è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥");return}try{V.value=!0,c.value=0;const e=String(_.value||"").trim();if(!e)throw new Error("è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥");await a.createTask(e),ee(),r("ä»»åŠ¡åˆ›å»ºæˆåŠŸ")}catch(e){console.error("åˆ›å»ºä»»åŠ¡å¤±è´¥:",e),r("åˆ›å»ºä»»åŠ¡å¤±è´¥: "+e.message)}finally{V.value=!1}},Z=async()=>{try{await be({title:"ç¡®è®¤å–æ¶ˆ",message:"ç¡®å®šè¦å–æ¶ˆå½“å‰ä»»åŠ¡å—ï¼Ÿ"}),F.value=!0,await a.cancelTask(),I(),r("ä»»åŠ¡å·²å–æ¶ˆ")}catch(e){e!=="cancel"&&(console.error("å–æ¶ˆä»»åŠ¡å¤±è´¥:",e),r("å–æ¶ˆä»»åŠ¡å¤±è´¥"))}finally{F.value=!1}},ee=()=>{b.value||(te(),b.value=setInterval(async()=>{var e;if(!((e=a.currentTask)!=null&&e.taskId)){I();return}try{await a.updateTaskStatus(),["completed","failed"].includes(a.currentTask.status)&&(I(),a.currentTask.status==="completed"&&(c.value=100,setTimeout(()=>{i.push(`/preview/${a.currentTask.taskId}`)},500)))}catch(s){console.error("è½®è¯¢çŠ¶æ€å¤±è´¥:",s)}},5e3))},te=()=>{c.value=0,L.value=setInterval(()=>{if(c.value<99){const e=Math.max(.5,(99-c.value)*.1);c.value=Math.min(99,c.value+e)}},200)},se=()=>{L.value&&(clearInterval(L.value),L.value=null)},I=()=>{b.value&&(clearInterval(b.value),b.value=null),se()},ae=()=>{const e=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(e)?w.value="ios":/android/.test(e)?w.value="android":w.value="desktop"},ne=async()=>{if(console.log("ğŸ¯ ç”¨æˆ·ç‚¹å‡»å®‰è£…æŒ‰é’®"),console.log("è®¾å¤‡ç±»å‹:",w.value),console.log("æ˜¯å¦æ”¯æŒè‡ªåŠ¨å®‰è£…:",T.value),T.value&&w.value==="android"&&y.value)try{console.log("ğŸš€ å°è¯•ä¸€é”®å®‰è£…"),y.value.prompt();const{outcome:e}=await y.value.userChoice;if(console.log("ç”¨æˆ·é€‰æ‹©:",e),e==="accepted"){console.log("âœ… ç”¨æˆ·æ¥å—äº†å®‰è£…"),r({message:"å®‰è£…æˆåŠŸï¼è¯·åœ¨æ¡Œé¢æŸ¥çœ‹åº”ç”¨",type:"success",duration:3e3});return}else console.log("âŒ ç”¨æˆ·æ‹’ç»äº†å®‰è£…");y.value=null,T.value=!1}catch(e){console.error("ä¸€é”®å®‰è£…å¤±è´¥:",e)}console.log("ğŸ“± æ˜¾ç¤ºå®‰è£…æŒ‡å¼•"),A.value=!0},oe=e=>{const s=D.value.find(p=>p.name===e);return(s==null?void 0:s.icon)||"play-circle"},le=e=>{const s=D.value.find(p=>p.name===e);return(s==null?void 0:s.displayName)||e};return _e(()=>{var e;(e=a.currentTask)!=null&&e.taskId&&(console.log("é¡µé¢åˆ·æ–°ï¼Œæ¸…ç†ä¹‹å‰çš„ä»»åŠ¡:",a.currentTask.taskId),pe.cleanTask(a.currentTask.taskId)),ae(),window.addEventListener("beforeinstallprompt",s=>{console.log("ğŸ¯ æ£€æµ‹åˆ°PWAå®‰è£…æç¤ºäº‹ä»¶"),s.preventDefault(),y.value=s,T.value=!0,console.log("âœ… æ”¯æŒä¸€é”®å®‰è£…åŠŸèƒ½")}),window.addEventListener("appinstalled",()=>{console.log("ğŸ‰ PWAå®‰è£…å®Œæˆ"),y.value=null,T.value=!1,r({message:"åº”ç”¨å®‰è£…æˆåŠŸï¼",type:"success",duration:3e3})})}),ye(()=>{I()}),ke(()=>S.path,()=>{I()}),(e,s)=>{const p=we,re=Te,f=xe,ie=Ie,ce=Ce;return o(),m("div",Le,[s[10]||(s[10]=t("div",{class:"bg-decoration"},[t("div",{class:"decoration-circle circle-1"}),t("div",{class:"decoration-circle circle-2"}),t("div",{class:"decoration-circle circle-3"})],-1)),t("div",Ne,[t("header",Se,[s[3]||(s[3]=he('<div class="logo" data-v-d92c7564><div class="logo-icon glow-effect" data-v-d92c7564><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-d92c7564><path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z" stroke="currentColor" stroke-width="1.5" fill="none" data-v-d92c7564></path><path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5" fill="none" data-v-d92c7564></path></svg></div><div class="logo-text" data-v-d92c7564><h1 class="gradient-text" data-v-d92c7564>Link Copy</h1><p data-v-d92c7564>æ™ºèƒ½è§†é¢‘è§£æä¸æ–‡æ¡ˆæå–</p></div></div>',1)),d(p,{class:"install-btn btn-glass",icon:"wap-home-o",onClick:ne},{default:k(()=>s[2]||(s[2]=[C(" æ·»åŠ åˆ°æ¡Œé¢ ")])),_:1,__:[2]})]),t("main",Be,[t("div",Fe,[t("div",Ae,[s[6]||(s[6]=t("div",{class:"input-header"},[t("h2",null,"ç²˜è´´è§†é¢‘é“¾æ¥"),t("p",null,"æ”¯æŒæŠ–éŸ³ã€å“”å“©å“”å“©ç­‰ä¸»æµè§†é¢‘å¹³å°")],-1)),t("div",De,[d(re,{modelValue:_.value,"onUpdate:modelValue":[s[0]||(s[0]=l=>_.value=l),z],type:"textarea",placeholder:"åœ¨æ­¤ç²˜è´´è§†é¢‘é“¾æ¥æˆ–åˆ†äº«æ–‡æœ¬...",rows:"3",maxlength:"2000",disabled:U.value,class:"url-input",onFocus:q,onBlur:J},null,8,["modelValue","disabled"]),t("div",Me,[E.value?(o(),h(p,{key:0,class:"paste-btn btn-glass",icon:"add-o",onClick:X,loading:B.value},{default:k(()=>s[4]||(s[4]=[C(" ç²˜è´´ ")])),_:1,__:[4]},8,["loading"])):x("",!0),d(p,{type:"primary",class:"submit-btn btn-primary",loading:V.value,disabled:!M.value||U.value,onClick:Y},{icon:k(()=>[d(f,{name:"play-circle"})]),default:k(()=>[s[5]||(s[5]=C(" å¼€å§‹è§£æ "))]),_:1,__:[5]},8,["loading","disabled"])])]),P.value?(o(),m("div",Ue,[d(ie,{type:"primary",class:"platform-tag"},{default:k(()=>[d(f,{name:oe(P.value)},null,8,["name"]),C(" æ£€æµ‹åˆ°ï¼š"+g(le(P.value)),1)]),_:1})])):x("",!0)])]),$.value?(o(),m("div",Ee,[t("div",ze,[t("div",He,[t("div",Re,[N.value?(o(),h(ce,{key:0,size:"24px",color:"#667eea"})):j.value?(o(),h(f,{key:1,name:"success",color:"#10b981"})):G.value?(o(),h(f,{key:2,name:"cross",color:"#ef4444"})):(o(),h(f,{key:3,name:"clock-o",color:"#f59e0b"}))]),t("div",We,[t("h3",null,g(K.value),1),t("p",null,g(O.value),1)]),N.value?(o(),h(p,{key:0,size:"small",type:"danger",plain:"",onClick:Z,loading:F.value},{default:k(()=>s[7]||(s[7]=[C(" å–æ¶ˆ ")])),_:1,__:[7]},8,["loading"])):x("",!0)]),N.value?(o(),m("div",$e,[t("div",je,[t("div",{class:"progress-fill",style:H({width:c.value+"%"})},null,4)]),t("span",Ge,g(Math.round(c.value))+"%",1)])):x("",!0)])])):x("",!0),t("div",Ke,[t("div",Oe,[s[8]||(s[8]=t("div",{class:"platforms-header"},[t("h3",null,"æ”¯æŒå¹³å°"),t("p",null,"æŒç»­æ‰©å±•ä¸­ï¼Œæ›´å¤šå¹³å°å³å°†æ”¯æŒ")],-1)),t("div",Qe,[(o(!0),m(R,null,W(D.value,l=>(o(),m("div",{key:l.name,class:"platform-item"},[t("div",{class:"platform-icon",style:H({color:l.color})},[d(f,{name:l.icon},null,8,["name"])],4),t("span",qe,g(l.displayName),1)]))),128))])])]),t("div",Je,[t("div",Xe,[s[9]||(s[9]=t("div",{class:"features-header"},[t("h3",null,"åŠŸèƒ½ç‰¹æ€§"),t("p",null,"å¼ºå¤§çš„è§†é¢‘å¤„ç†èƒ½åŠ›ï¼Œä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ")],-1)),t("div",Ye,[(o(!0),m(R,null,W(Q.value,l=>(o(),m("div",{key:l.name,class:"feature-item"},[t("div",Ze,[d(f,{name:l.icon},null,8,["name"])]),t("div",et,[t("h4",null,g(l.name),1),t("p",null,g(l.description),1)])]))),128))])])])])]),d(de,{modelValue:A.value,"onUpdate:modelValue":s[1]||(s[1]=l=>A.value=l)},null,8,["modelValue"])])}}},ct=ue(tt,[["__scopeId","data-v-d92c7564"]]);export{ct as default};
//# sourceMappingURL=Home-da8d85c4.js.map
