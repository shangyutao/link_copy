import{_ as Fe,I as Be}from"./index-871e2b7e.js";/* empty css              */import{u as Se,v as ze,r as De}from"./clipboard-c87fa247.js";/* empty css              */import{K as Le,L as Ne,r as o,c as g,a as Ae,o as Ue,w as Ee,B as n,C as d,D as a,E as Oe,j as i,M as _,N as R,O as M,G as b,H as E,P as m,Q as se,F as ae,R as te,t as T}from"./vendor-0fdb20b8.js";import{s as r,a as Ge,B as We,F as $e,T as He,P as Ke,I as Re,L as je}from"./vant-b07c73d6.js";import"./utils-917b1704.js";const qe=k=>{if(!k||typeof k!="string")return!1;try{return new URL(k),!0}catch{return[/douyin\.com/i,/dy\.com/i,/bilibili\.com/i,/b23\.tv/i,/youtube\.com/i,/youtu\.be/i].some(O=>O.test(k))}},Qe=k=>{if(!k)return null;const v=k.toLowerCase();return v.includes("douyin.com")||v.includes("dy.com")?"douyin":v.includes("bilibili.com")||v.includes("b23.tv")?"bilibili":v.includes("youtube.com")||v.includes("youtu.be")?"youtube":v.includes("tiktok.com")?"tiktok":null};const Je={class:"home-page"},Xe={class:"container"},Ye={class:"header animate-fade-in-up"},Ze={class:"main-content"},es={class:"input-section animate-fade-in-up"},ss={class:"input-card card-floating"},as={class:"tab-switcher"},ts={class:"tab-buttons"},os={key:0,class:"tab-content"},ns={class:"input-area"},ls={class:"input-actions"},is={key:0,class:"platform-hint"},rs={key:1,class:"tab-content"},us={class:"upload-area"},cs=["disabled"],ds={key:0,class:"upload-prompt"},vs={class:"upload-icon"},ps={key:1,class:"file-preview"},ms={class:"file-icon"},fs={class:"file-info"},gs={class:"upload-actions"},_s={key:0,class:"upload-progress"},ks={class:"progress-info"},ys={key:0,class:"progress-section animate-fade-in-up"},bs={class:"progress-card card-floating"},hs={class:"progress-header"},ws={class:"progress-icon"},Ts={class:"progress-content"},xs={key:0,class:"progress-bar-container"},Ms={class:"progress-bar"},Vs={class:"progress-text"},Is={class:"platforms-section animate-fade-in-up"},Cs={class:"platforms-card card-floating"},Ps={class:"platforms-grid"},Fs={class:"platform-name"},Bs={class:"features-section animate-fade-in-up"},Ss={class:"features-card card-floating"},zs={class:"features-grid"},Ds={class:"feature-icon"},Ls={class:"feature-content"},Ns={__name:"Home",setup(k){const v=Le(),O=Ne(),t=Se(),h=o(""),V=o(""),L=o(!1),G=o(!1),W=o(!1),f=o(0),N=o(null),I=o(null),C=o("link"),p=o(null),P=o(!1),w=o(0),F=o(!1),B=o(null),$=o(!1),S=o("desktop"),x=o(null),z=o(!1),j=g(()=>{const e=h.value||"";return typeof e=="string"&&e.trim().length>0&&qe(e)}),y=g(()=>A.value||L.value||P.value||t.isDownloading),q=g(()=>navigator.clipboard&&window.isSecureContext),oe=g(()=>t.currentTask&&t.currentTask.status!=="idle"),A=g(()=>{var e;return["pending","downloading","transcribing"].includes((e=t.currentTask)==null?void 0:e.status)}),ne=g(()=>{var e;return((e=t.currentTask)==null?void 0:e.status)==="completed"}),le=g(()=>{var e;return((e=t.currentTask)==null?void 0:e.status)==="failed"}),ie=g(()=>{if(!t.currentTask)return"";switch(t.currentTask.status){case"pending":return"ä»»åŠ¡å‡†å¤‡ä¸­";case"downloading":return"è§†é¢‘è§£æä¸­";case"transcribing":return"éŸ³é¢‘è½¬æ–‡æ¡ˆä¸­";case"completed":return"å¤„ç†å®Œæˆ";case"failed":return"å¤„ç†å¤±è´¥";default:return""}}),re=g(()=>{if(!t.currentTask)return"";switch(t.currentTask.status){case"pending":return"æ­£åœ¨åˆ›å»ºä¸‹è½½ä»»åŠ¡...";case"downloading":return"æ­£åœ¨ä¸‹è½½è§†é¢‘æ–‡ä»¶...";case"transcribing":return"æ­£åœ¨è½¬æ¢éŸ³é¢‘ä¸ºæ–‡æ¡ˆ...";case"completed":return"æ‰€æœ‰å¤„ç†æ­¥éª¤å·²å®Œæˆ";case"failed":return t.currentTask.errorMessage||"å¤„ç†è¿‡ç¨‹ä¸­å‡ºç°é”™è¯¯";default:return""}}),H=o([{name:"douyin",displayName:"æŠ–éŸ³",icon:"music-o",color:"#000000"},{name:"bilibili",displayName:"å“”å“©å“”å“©",icon:"video-o",color:"#fb7299"},{name:"upload",displayName:"æ–‡ä»¶ä¸Šä¼ ",icon:"upgrade",color:"#667eea"}]),ue=o([{name:"æ™ºèƒ½è§£æ",description:"è‡ªåŠ¨è¯†åˆ«è§†é¢‘å¹³å°ï¼Œå¿«é€Ÿè§£æä¸‹è½½é“¾æ¥",icon:"search"},{name:"æ–‡ä»¶ä¸Šä¼ ",description:"ç›´æ¥ä¸Šä¼ æœ¬åœ°è§†é¢‘æ–‡ä»¶ï¼Œæ”¯æŒå¤šç§æ ¼å¼",icon:"upgrade"},{name:"é«˜æ¸…ä¸‹è½½",description:"æ”¯æŒå¤šç§åˆ†è¾¨ç‡ï¼Œä¿è¯è§†é¢‘è´¨é‡",icon:"down"},{name:"éŸ³é¢‘è½¬æ–‡æ¡ˆ",description:"åˆ©ç”¨AIæŠ€æœ¯å°†è§†é¢‘éŸ³é¢‘è½¬æ¢ä¸ºæ–‡å­—",icon:"volume-o"},{name:"æ–‡æ¡ˆä¼˜åŒ–",description:"æ™ºèƒ½ä¼˜åŒ–æ–‡æ¡ˆå†…å®¹ï¼Œæå‡å¯è¯»æ€§",icon:"edit"}]),Q=e=>{const s=String(e||"");h.value=s,V.value=Qe(s)},ce=()=>{},de=()=>{},ve=async()=>{if(!q.value){r("å½“å‰ç¯å¢ƒä¸æ”¯æŒå‰ªè´´æ¿æ“ä½œ");return}try{G.value=!0;const e=await De();e?(h.value=e,Q(e),r("ç²˜è´´æˆåŠŸ")):r("å‰ªè´´æ¿ä¸ºç©º")}catch(e){console.error("ç²˜è´´å¤±è´¥:",e),r("ç²˜è´´å¤±è´¥")}finally{G.value=!1}},pe=async()=>{if(!j.value){r("è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥");return}try{L.value=!0,f.value=0;const e=String(h.value||"").trim();if(!e)throw new Error("è¯·è¾“å…¥æœ‰æ•ˆçš„è§†é¢‘é“¾æ¥");await t.createTask(e),J(),r("ä»»åŠ¡åˆ›å»ºæˆåŠŸ")}catch(e){console.error("åˆ›å»ºä»»åŠ¡å¤±è´¥:",e),r("åˆ›å»ºä»»åŠ¡å¤±è´¥: "+e.message)}finally{L.value=!1}},me=async()=>{try{await Ge({title:"ç¡®è®¤å–æ¶ˆ",message:"ç¡®å®šè¦å–æ¶ˆå½“å‰ä»»åŠ¡å—ï¼Ÿ"}),W.value=!0,await t.cancelTask(),D(),r("ä»»åŠ¡å·²å–æ¶ˆ")}catch(e){e!=="cancel"&&(console.error("å–æ¶ˆä»»åŠ¡å¤±è´¥:",e),r("å–æ¶ˆä»»åŠ¡å¤±è´¥"))}finally{W.value=!1}},J=()=>{I.value||(fe(),I.value=setInterval(async()=>{var e;if(!((e=t.currentTask)!=null&&e.taskId)){D();return}try{await t.updateTaskStatus(),["completed","failed"].includes(t.currentTask.status)&&(D(),t.currentTask.status==="completed"&&(f.value=100,setTimeout(()=>{v.push(`/preview/${t.currentTask.taskId}`)},500)))}catch(s){console.error("è½®è¯¢çŠ¶æ€å¤±è´¥:",s)}},5e3))},fe=()=>{f.value=0,N.value=setInterval(()=>{if(f.value<99){const e=Math.max(.5,(99-f.value)*.1);f.value=Math.min(99,f.value+e)}},200)},ge=()=>{N.value&&(clearInterval(N.value),N.value=null)},D=()=>{I.value&&(clearInterval(I.value),I.value=null),ge()},_e=()=>{const e=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(e)?S.value="ios":/android/.test(e)?S.value="android":S.value="desktop"},ke=async()=>{if(console.log("ğŸ¯ ç”¨æˆ·ç‚¹å‡»å®‰è£…æŒ‰é’®"),console.log("è®¾å¤‡ç±»å‹:",S.value),console.log("æ˜¯å¦æ”¯æŒè‡ªåŠ¨å®‰è£…:",z.value),z.value&&S.value==="android"&&x.value)try{console.log("ğŸš€ å°è¯•ä¸€é”®å®‰è£…"),x.value.prompt();const{outcome:e}=await x.value.userChoice;if(console.log("ç”¨æˆ·é€‰æ‹©:",e),e==="accepted"){console.log("âœ… ç”¨æˆ·æ¥å—äº†å®‰è£…"),r({message:"å®‰è£…æˆåŠŸï¼è¯·åœ¨æ¡Œé¢æŸ¥çœ‹åº”ç”¨",type:"success",duration:3e3});return}else console.log("âŒ ç”¨æˆ·æ‹’ç»äº†å®‰è£…");x.value=null,z.value=!1}catch(e){console.error("ä¸€é”®å®‰è£…å¤±è´¥:",e)}console.log("ğŸ“± æ˜¾ç¤ºå®‰è£…æŒ‡å¼•"),$.value=!0},ye=e=>{const s=H.value.find(c=>c.name===e);return(s==null?void 0:s.icon)||"play-circle"},be=e=>{const s=H.value.find(c=>c.name===e);return(s==null?void 0:s.displayName)||e},X=e=>{C.value=e,e==="link"?Y():(h.value="",V.value="")},Y=()=>{p.value=null,w.value=0,F.value=!1},he=()=>{!y.value&&B.value&&B.value.click()},we=e=>{const s=e.target.files[0];s&&Z(s)},Te=e=>{if(F.value=!1,y.value)return;const s=e.dataTransfer.files;s.length>0&&Z(s[0])},xe=()=>{y.value||(F.value=!0)},Me=()=>{F.value=!1},Z=e=>{if(e.size>524288e3){r(`æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡500MBï¼Œå½“å‰æ–‡ä»¶ï¼š${ee(e.size)}`);return}const c=["video/mp4","video/avi","video/quicktime","video/x-msvideo","video/x-flv","video/webm","video/x-matroska","video/mp4v-es","video/3gpp","video/ogg"],l=[".mp4",".avi",".mov",".wmv",".flv",".webm",".mkv",".m4v",".3gp",".ogv"],U=e.name.toLowerCase(),K=U.substring(U.lastIndexOf("."));if(!c.includes(e.type)&&!l.includes(K)){r("ä¸æ”¯æŒçš„è§†é¢‘æ ¼å¼ï¼Œè¯·ä¸Šä¼  MP4ã€AVIã€MOVã€WMVã€FLVã€WEBMã€MKVã€M4Vã€3GPã€OGV æ ¼å¼çš„è§†é¢‘æ–‡ä»¶");return}p.value=e,r("æ–‡ä»¶é€‰æ‹©æˆåŠŸ")},Ve=()=>{p.value=null,w.value=0,B.value&&(B.value.value="")},Ie=async()=>{if(!p.value){r("è¯·å…ˆé€‰æ‹©è§†é¢‘æ–‡ä»¶");return}try{P.value=!0,w.value=0,await t.createUploadTask(p.value,e=>{w.value=e}),J(),r("æ–‡ä»¶ä¸Šä¼ æˆåŠŸ")}catch(e){console.error("æ–‡ä»¶ä¸Šä¼ å¤±è´¥:",e),r("æ–‡ä»¶ä¸Šä¼ å¤±è´¥: "+e.message)}finally{P.value=!1}},ee=e=>{if(e===0)return"0 B";const s=1024,c=["B","KB","MB","GB"],l=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,l)).toFixed(2))+" "+c[l]};return Ae(()=>{var e;(e=t.currentTask)!=null&&e.taskId&&(console.log("é¡µé¢åˆ·æ–°ï¼Œæ¸…ç†ä¹‹å‰çš„ä»»åŠ¡:",t.currentTask.taskId),ze.cleanTask(t.currentTask.taskId)),Y(),_e(),window.addEventListener("beforeinstallprompt",s=>{console.log("ğŸ¯ æ£€æµ‹åˆ°PWAå®‰è£…æç¤ºäº‹ä»¶"),s.preventDefault(),x.value=s,z.value=!0,console.log("âœ… æ”¯æŒä¸€é”®å®‰è£…åŠŸèƒ½")}),window.addEventListener("appinstalled",()=>{console.log("ğŸ‰ PWAå®‰è£…å®Œæˆ"),x.value=null,z.value=!1,r({message:"åº”ç”¨å®‰è£…æˆåŠŸï¼",type:"success",duration:3e3})})}),Ue(()=>{D()}),Ee(()=>O.path,()=>{D()}),(e,s)=>{const c=We,l=Re,U=$e,K=He,Ce=Ke,Pe=je;return n(),d("div",Je,[s[21]||(s[21]=a("div",{class:"bg-decoration"},[a("div",{class:"decoration-circle circle-1"}),a("div",{class:"decoration-circle circle-2"}),a("div",{class:"decoration-circle circle-3"})],-1)),a("div",Xe,[a("header",Ye,[s[5]||(s[5]=Oe('<div class="logo" data-v-997ab4a1><div class="logo-icon glow-effect" data-v-997ab4a1><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-997ab4a1><path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z" stroke="currentColor" stroke-width="1.5" fill="none" data-v-997ab4a1></path><path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5" fill="none" data-v-997ab4a1></path></svg></div><div class="logo-text" data-v-997ab4a1><h1 class="gradient-text" data-v-997ab4a1>Link Copy</h1><p data-v-997ab4a1>æ™ºèƒ½è§†é¢‘è§£æä¸æ–‡æ¡ˆæå–</p></div></div>',1)),i(c,{class:"install-btn btn-glass",icon:"wap-home-o",onClick:ke},{default:_(()=>s[4]||(s[4]=[T(" æ·»åŠ åˆ°æ¡Œé¢ ")])),_:1,__:[4]})]),a("main",Ze,[a("div",es,[a("div",ss,[a("div",as,[a("div",ts,[a("button",{class:R(["tab-button",{active:C.value==="link"}]),onClick:s[0]||(s[0]=u=>X("link"))},[i(l,{name:"link"}),s[6]||(s[6]=a("span",null,"é“¾æ¥è§£æ",-1))],2),a("button",{class:R(["tab-button",{active:C.value==="upload"}]),onClick:s[1]||(s[1]=u=>X("upload"))},[i(l,{name:"upgrade"}),s[7]||(s[7]=a("span",null,"æ–‡ä»¶ä¸Šä¼ ",-1))],2)])]),C.value==="link"?(n(),d("div",os,[s[10]||(s[10]=a("div",{class:"input-header"},[a("h2",null,"ç²˜è´´è§†é¢‘é“¾æ¥"),a("p",null,"æ”¯æŒæŠ–éŸ³ã€å“”å“©å“”å“©ç­‰ä¸»æµè§†é¢‘å¹³å°")],-1)),a("div",ns,[i(U,{modelValue:h.value,"onUpdate:modelValue":[s[2]||(s[2]=u=>h.value=u),Q],type:"textarea",placeholder:"åœ¨æ­¤ç²˜è´´è§†é¢‘é“¾æ¥æˆ–åˆ†äº«æ–‡æœ¬...",rows:"3",maxlength:"2000",disabled:y.value,class:"url-input",onFocus:ce,onBlur:de},null,8,["modelValue","disabled"]),a("div",ls,[q.value?(n(),M(c,{key:0,class:"paste-btn btn-glass",icon:"add-o",onClick:ve,loading:G.value},{default:_(()=>s[8]||(s[8]=[T(" ç²˜è´´ ")])),_:1,__:[8]},8,["loading"])):b("",!0),i(c,{type:"primary",class:"submit-btn btn-primary",loading:L.value,disabled:!j.value||y.value,onClick:pe},{icon:_(()=>[i(l,{name:"play-circle"})]),default:_(()=>[s[9]||(s[9]=T(" å¼€å§‹è§£æ "))]),_:1,__:[9]},8,["loading","disabled"])])]),V.value?(n(),d("div",is,[i(K,{type:"primary",class:"platform-tag"},{default:_(()=>[i(l,{name:ye(V.value)},null,8,["name"]),T(" æ£€æµ‹åˆ°ï¼š"+m(be(V.value)),1)]),_:1})])):b("",!0)])):b("",!0),C.value==="upload"?(n(),d("div",rs,[s[17]||(s[17]=a("div",{class:"input-header"},[a("h2",null,"ä¸Šä¼ è§†é¢‘æ–‡ä»¶"),a("p",null,"æ”¯æŒ MP4ã€AVIã€MOV ç­‰æ ¼å¼ï¼Œæ–‡ä»¶å¤§å°ä¸è¶…è¿‡ 500MB")],-1)),a("div",us,[a("div",{class:R(["upload-dropzone",{dragover:F.value,"has-file":p.value,disabled:y.value}]),onClick:he,onDragover:E(xe,["prevent"]),onDragleave:E(Me,["prevent"]),onDrop:E(Te,["prevent"])},[a("input",{ref_key:"fileInput",ref:B,type:"file",accept:"video/*,.mp4,.avi,.mov,.wmv,.flv,.webm,.mkv,.m4v,.3gp,.ogv",onChange:we,style:{display:"none"},disabled:y.value},null,40,cs),p.value?(n(),d("div",ps,[a("div",ms,[i(l,{name:"video-o",size:"48px"})]),a("div",fs,[a("h4",null,m(p.value.name),1),a("p",null,m(ee(p.value.size)),1)]),i(c,{size:"small",type:"danger",plain:"",onClick:E(Ve,["stop"])},{default:_(()=>s[14]||(s[14]=[T(" ç§»é™¤ ")])),_:1,__:[14]})])):(n(),d("div",ds,[a("div",vs,[i(l,{name:"plus",size:"48px"})]),s[11]||(s[11]=a("h3",null,"ç‚¹å‡»é€‰æ‹©æˆ–æ‹–æ‹½è§†é¢‘æ–‡ä»¶",-1)),s[12]||(s[12]=a("p",null,"æ”¯æŒ MP4ã€AVIã€MOVã€WMVã€FLVã€WEBMã€MKVã€M4Vã€3GPã€OGV",-1)),s[13]||(s[13]=a("p",{class:"size-hint"},"æ–‡ä»¶å¤§å°é™åˆ¶ï¼š500MB",-1))]))],34),a("div",gs,[i(c,{type:"primary",class:"upload-btn btn-primary",loading:P.value,disabled:!p.value||y.value,onClick:Ie},{icon:_(()=>[i(l,{name:"upgrade"})]),default:_(()=>[s[15]||(s[15]=T(" å¼€å§‹ä¸Šä¼  "))]),_:1,__:[15]},8,["loading","disabled"])]),w.value>0&&P.value?(n(),d("div",_s,[a("div",ks,[s[16]||(s[16]=a("span",null,"ä¸Šä¼ è¿›åº¦",-1)),a("span",null,m(w.value)+"%",1)]),i(Ce,{percentage:w.value,"stroke-width":"8",color:"#667eea","track-color":"rgba(102, 126, 234, 0.1)"},null,8,["percentage"])])):b("",!0)])])):b("",!0)])]),oe.value?(n(),d("div",ys,[a("div",bs,[a("div",hs,[a("div",ws,[A.value?(n(),M(Pe,{key:0,size:"24px",color:"#667eea"})):ne.value?(n(),M(l,{key:1,name:"success",color:"#10b981"})):le.value?(n(),M(l,{key:2,name:"cross",color:"#ef4444"})):(n(),M(l,{key:3,name:"clock-o",color:"#f59e0b"}))]),a("div",Ts,[a("h3",null,m(ie.value),1),a("p",null,m(re.value),1)]),A.value?(n(),M(c,{key:0,size:"small",type:"danger",plain:"",onClick:me,loading:W.value},{default:_(()=>s[18]||(s[18]=[T(" å–æ¶ˆ ")])),_:1,__:[18]},8,["loading"])):b("",!0)]),A.value?(n(),d("div",xs,[a("div",Ms,[a("div",{class:"progress-fill",style:se({width:f.value+"%"})},null,4)]),a("span",Vs,m(Math.round(f.value))+"%",1)])):b("",!0)])])):b("",!0),a("div",Is,[a("div",Cs,[s[19]||(s[19]=a("div",{class:"platforms-header"},[a("h3",null,"æ”¯æŒå¹³å°"),a("p",null,"æŒç»­æ‰©å±•ä¸­ï¼Œæ›´å¤šå¹³å°å³å°†æ”¯æŒ")],-1)),a("div",Ps,[(n(!0),d(ae,null,te(H.value,u=>(n(),d("div",{key:u.name,class:"platform-item"},[a("div",{class:"platform-icon",style:se({color:u.color})},[i(l,{name:u.icon},null,8,["name"])],4),a("span",Fs,m(u.displayName),1)]))),128))])])]),a("div",Bs,[a("div",Ss,[s[20]||(s[20]=a("div",{class:"features-header"},[a("h3",null,"åŠŸèƒ½ç‰¹æ€§"),a("p",null,"å¼ºå¤§çš„è§†é¢‘å¤„ç†èƒ½åŠ›ï¼Œä¸€ç«™å¼è§£å†³æ–¹æ¡ˆ")],-1)),a("div",zs,[(n(!0),d(ae,null,te(ue.value,u=>(n(),d("div",{key:u.name,class:"feature-item"},[a("div",Ds,[i(l,{name:u.icon},null,8,["name"])]),a("div",Ls,[a("h4",null,m(u.name),1),a("p",null,m(u.description),1)])]))),128))])])])])]),i(Be,{modelValue:$.value,"onUpdate:modelValue":s[3]||(s[3]=u=>$.value=u)},null,8,["modelValue"])])}}},Hs=Fe(Ns,[["__scopeId","data-v-997ab4a1"]]);export{Hs as default};
//# sourceMappingURL=Home-a5825c06.js.map
