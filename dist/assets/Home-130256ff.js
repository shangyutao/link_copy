import{_ as oe}from"./index-7c84244e.js";/* empty css              */import{u as re,v as le,r as ie}from"./clipboard-bc3ba9ce.js";/* empty css              */import{K as ce,L as ue,r as l,c,a as de,o as ve,w as pe,B as n,C as p,D as t,E as me,j as m,M as h,N as y,H as w,O as _,P as U,F as H,Q as z,t as T}from"./vendor-b4f2d831.js";import{s as u,a as fe,B as _e,F as ge,T as he,I as ye,L as ke}from"./vant-eb5bb9af.js";import"./utils-917b1704.js";const be=d=>{if(!d||typeof d!="string")return!1;try{return new URL(d),!0}catch{return[/douyin\.com/i,/dy\.com/i,/bilibili\.com/i,/b23\.tv/i,/youtube\.com/i,/youtu\.be/i].some(V=>V.test(d))}},we=d=>{if(!d)return null;const o=d.toLowerCase();return o.includes("douyin.com")||o.includes("dy.com")?"douyin":o.includes("bilibili.com")||o.includes("b23.tv")?"bilibili":o.includes("youtube.com")||o.includes("youtu.be")?"youtube":o.includes("tiktok.com")?"tiktok":null};const Te={class:"home-page"},xe={class:"container"},Ie={class:"header animate-fade-in-up"},Ce={class:"main-content"},Pe={class:"input-section animate-fade-in-up"},Ve={class:"input-card card-floating"},Ne={class:"input-area"},Se={class:"input-actions"},Be={key:0,class:"platform-hint"},Fe={key:0,class:"progress-section animate-fade-in-up"},Le={class:"progress-card card-floating"},Me={class:"progress-header"},De={class:"progress-icon"},Ue={class:"progress-content"},He={key:0,class:"progress-bar-container"},ze={class:"progress-bar"},Ae={class:"progress-text"},Ee={class:"platforms-section animate-fade-in-up"},Re={class:"platforms-card card-floating"},$e={class:"platforms-grid"},je={class:"platform-name"},Ke={class:"features-section animate-fade-in-up"},Oe={class:"features-card card-floating"},Qe={class:"features-grid"},qe={class:"feature-icon"},Ge={class:"feature-content"},Je={__name:"Home",setup(d){const o=ce(),V=ue(),a=re(),g=l(""),x=l(""),I=l(!1),N=l(!1),S=l(!1),i=l(0),C=l(null),k=l(null),F=c(()=>{const e=g.value||"";return typeof e=="string"&&e.trim().length>0&&be(e)}),L=c(()=>P.value||I.value||a.isDownloading),M=c(()=>navigator.clipboard&&window.isSecureContext),A=c(()=>a.currentTask&&a.currentTask.status!=="idle"),P=c(()=>{var e;return["pending","downloading","transcribing"].includes((e=a.currentTask)==null?void 0:e.status)}),E=c(()=>{var e;return((e=a.currentTask)==null?void 0:e.status)==="completed"}),R=c(()=>{var e;return((e=a.currentTask)==null?void 0:e.status)==="failed"}),$=c(()=>{if(!a.currentTask)return"";switch(a.currentTask.status){case"pending":return"任务准备中";case"downloading":return"视频解析中";case"transcribing":return"音频转文案中";case"completed":return"处理完成";case"failed":return"处理失败";default:return""}}),j=c(()=>{if(!a.currentTask)return"";switch(a.currentTask.status){case"pending":return"正在创建下载任务...";case"downloading":return"正在下载视频文件...";case"transcribing":return"正在转换音频为文案...";case"completed":return"所有处理步骤已完成";case"failed":return a.currentTask.errorMessage||"处理过程中出现错误";default:return""}}),B=l([{name:"douyin",displayName:"抖音",icon:"music-o",color:"#000000"},{name:"bilibili",displayName:"哔哩哔哩",icon:"video-o",color:"#fb7299"}]),K=l([{name:"智能解析",description:"自动识别视频平台，快速解析下载链接",icon:"search"},{name:"高清下载",description:"支持多种分辨率，保证视频质量",icon:"hd-o"},{name:"音频转文案",description:"利用AI技术将视频音频转换为文字",icon:"volume-o"},{name:"文案优化",description:"智能优化文案内容，提升可读性",icon:"edit"}]),D=e=>{const s=String(e||"");g.value=s,x.value=we(s)},O=()=>{},Q=()=>{},q=async()=>{if(!M.value){u("当前环境不支持剪贴板操作");return}try{N.value=!0;const e=await ie();e?(g.value=e,D(e),u("粘贴成功")):u("剪贴板为空")}catch(e){console.error("粘贴失败:",e),u("粘贴失败")}finally{N.value=!1}},G=async()=>{if(!F.value){u("请输入有效的视频链接");return}try{I.value=!0,i.value=0;const e=String(g.value||"").trim();if(!e)throw new Error("请输入有效的视频链接");await a.createTask(e),W(),u("任务创建成功")}catch(e){console.error("创建任务失败:",e),u("创建任务失败: "+e.message)}finally{I.value=!1}},J=async()=>{try{await fe({title:"确认取消",message:"确定要取消当前任务吗？"}),S.value=!0,await a.cancelTask(),b(),u("任务已取消")}catch(e){e!=="cancel"&&(console.error("取消任务失败:",e),u("取消任务失败"))}finally{S.value=!1}},W=()=>{k.value||(X(),k.value=setInterval(async()=>{var e;if(!((e=a.currentTask)!=null&&e.taskId)){b();return}try{await a.updateTaskStatus(),["completed","failed"].includes(a.currentTask.status)&&(b(),a.currentTask.status==="completed"&&(i.value=100,setTimeout(()=>{o.push(`/preview/${a.currentTask.taskId}`)},500)))}catch(s){console.error("轮询状态失败:",s)}},5e3))},X=()=>{i.value=0,C.value=setInterval(()=>{if(i.value<99){const e=Math.max(.5,(99-i.value)*.1);i.value=Math.min(99,i.value+e)}},200)},Y=()=>{C.value&&(clearInterval(C.value),C.value=null)},b=()=>{k.value&&(clearInterval(k.value),k.value=null),Y()},Z=()=>{o.push("/history")},ee=e=>{const s=B.value.find(v=>v.name===e);return(s==null?void 0:s.icon)||"play-circle"},te=e=>{const s=B.value.find(v=>v.name===e);return(s==null?void 0:s.displayName)||e};return de(()=>{var e;(e=a.currentTask)!=null&&e.taskId&&(console.log("页面刷新，清理之前的任务:",a.currentTask.taskId),le.cleanTask(a.currentTask.taskId))}),ve(()=>{b()}),pe(()=>V.path,()=>{b()}),(e,s)=>{const v=_e,se=ge,f=ye,ae=he,ne=ke;return n(),p("div",Te,[s[9]||(s[9]=t("div",{class:"bg-decoration"},[t("div",{class:"decoration-circle circle-1"}),t("div",{class:"decoration-circle circle-2"}),t("div",{class:"decoration-circle circle-3"})],-1)),t("div",xe,[t("header",Ie,[s[2]||(s[2]=me('<div class="logo" data-v-cc375077><div class="logo-icon glow-effect" data-v-cc375077><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-cc375077><path d="M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z" stroke="currentColor" stroke-width="1.5" fill="none" data-v-cc375077></path><path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="1.5" fill="none" data-v-cc375077></path></svg></div><div class="logo-text" data-v-cc375077><h1 class="gradient-text" data-v-cc375077>Link Copy</h1><p data-v-cc375077>智能视频解析与文案提取</p></div></div>',1)),m(v,{class:"history-btn btn-glass",icon:"records",onClick:Z},{default:h(()=>s[1]||(s[1]=[T(" 历史记录 ")])),_:1,__:[1]})]),t("main",Ce,[t("div",Pe,[t("div",Ve,[s[5]||(s[5]=t("div",{class:"input-header"},[t("h2",null,"粘贴视频链接"),t("p",null,"支持抖音、哔哩哔哩等主流视频平台")],-1)),t("div",Ne,[m(se,{modelValue:g.value,"onUpdate:modelValue":[s[0]||(s[0]=r=>g.value=r),D],type:"textarea",placeholder:"在此粘贴视频链接或分享文本...",rows:"3",maxlength:"2000",disabled:L.value,class:"url-input",onFocus:O,onBlur:Q},null,8,["modelValue","disabled"]),t("div",Se,[M.value?(n(),y(v,{key:0,class:"paste-btn btn-glass",icon:"add-o",onClick:q,loading:N.value},{default:h(()=>s[3]||(s[3]=[T(" 粘贴 ")])),_:1,__:[3]},8,["loading"])):w("",!0),m(v,{type:"primary",class:"submit-btn btn-primary",loading:I.value,disabled:!F.value||L.value,onClick:G},{icon:h(()=>[m(f,{name:"play-circle"})]),default:h(()=>[s[4]||(s[4]=T(" 开始解析 "))]),_:1,__:[4]},8,["loading","disabled"])])]),x.value?(n(),p("div",Be,[m(ae,{type:"primary",class:"platform-tag"},{default:h(()=>[m(f,{name:ee(x.value)},null,8,["name"]),T(" 检测到："+_(te(x.value)),1)]),_:1})])):w("",!0)])]),A.value?(n(),p("div",Fe,[t("div",Le,[t("div",Me,[t("div",De,[P.value?(n(),y(ne,{key:0,size:"24px",color:"#667eea"})):E.value?(n(),y(f,{key:1,name:"success",color:"#10b981"})):R.value?(n(),y(f,{key:2,name:"cross",color:"#ef4444"})):(n(),y(f,{key:3,name:"clock-o",color:"#f59e0b"}))]),t("div",Ue,[t("h3",null,_($.value),1),t("p",null,_(j.value),1)]),P.value?(n(),y(v,{key:0,size:"small",type:"danger",plain:"",onClick:J,loading:S.value},{default:h(()=>s[6]||(s[6]=[T(" 取消 ")])),_:1,__:[6]},8,["loading"])):w("",!0)]),P.value?(n(),p("div",He,[t("div",ze,[t("div",{class:"progress-fill",style:U({width:i.value+"%"})},null,4)]),t("span",Ae,_(Math.round(i.value))+"%",1)])):w("",!0)])])):w("",!0),t("div",Ee,[t("div",Re,[s[7]||(s[7]=t("div",{class:"platforms-header"},[t("h3",null,"支持平台"),t("p",null,"持续扩展中，更多平台即将支持")],-1)),t("div",$e,[(n(!0),p(H,null,z(B.value,r=>(n(),p("div",{key:r.name,class:"platform-item"},[t("div",{class:"platform-icon",style:U({color:r.color})},[m(f,{name:r.icon},null,8,["name"])],4),t("span",je,_(r.displayName),1)]))),128))])])]),t("div",Ke,[t("div",Oe,[s[8]||(s[8]=t("div",{class:"features-header"},[t("h3",null,"功能特性"),t("p",null,"强大的视频处理能力，一站式解决方案")],-1)),t("div",Qe,[(n(!0),p(H,null,z(K.value,r=>(n(),p("div",{key:r.name,class:"feature-item"},[t("div",qe,[m(f,{name:r.icon},null,8,["name"])]),t("div",Ge,[t("h4",null,_(r.name),1),t("p",null,_(r.description),1)])]))),128))])])])])])])}}},at=oe(Je,[["__scopeId","data-v-cc375077"]]);export{at as default};
//# sourceMappingURL=Home-130256ff.js.map
