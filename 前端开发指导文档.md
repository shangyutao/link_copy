# Link_Copy 前端开发指导文档

## 📱 项目概述

Link_Copy 是一个链接转文案的工具，用户可以输入视频链接，系统自动爬取视频并提供预览、下载、转文案、AI优化等功能。

### 核心功能流程
1. 用户输入视频链接
2. 系统解析并预览视频
3. 用户选择：下载视频 / 转换文案 / 取消操作
4. 文案生成后，可选择AI优化
5. 展示最终优化后的文案

## 🛠️ 技术栈架构

### 推荐技术栈
- **前端框架**: Vue 3 + Composition API
- **构建工具**: Vite
- **移动端方案**: Capacitor (打包原生APP)
- **UI组件库**: Vant 4 (移动端优先)
- **状态管理**: Pinia
- **路由**: Vue Router 4
- **HTTP客户端**: Axios
- **样式方案**: Tailwind CSS + SCSS
- **图标**: Iconify
- **动画**: Lottie (Loading动画)

### 为什么选择这个技术栈？
1. **Vue 3 + Capacitor**: 一套代码，Web + APP 双端运行
2. **Vant 4**: 专为移动端设计，组件丰富美观
3. **Tailwind CSS**: 快速构建响应式界面
4. **Capacitor**: 比Cordova更现代，API更丰富

## 📁 项目结构

```
link-copy-frontend/
├── public/                  # 静态资源
│   ├── icons/              # APP图标
│   └── splash/             # 启动页
├── src/
│   ├── components/         # 公共组件
│   │   ├── common/        # 通用组件
│   │   ├── video/         # 视频相关组件
│   │   └── layout/        # 布局组件
│   ├── views/             # 页面组件
│   │   ├── Home.vue       # 首页
│   │   ├── VideoPreview.vue # 视频预览页
│   │   ├── TextResult.vue  # 文案结果页
│   │   └── History.vue     # 历史记录页
│   ├── stores/            # Pinia状态管理
│   │   ├── task.js        # 任务状态
│   │   └── user.js        # 用户状态
│   ├── services/          # API服务
│   │   ├── api.js         # 基础API配置
│   │   ├── video.js       # 视频相关API
│   │   └── task.js        # 任务相关API
│   ├── utils/             # 工具函数
│   │   ├── format.js      # 格式化工具
│   │   ├── validate.js    # 验证工具
│   │   └── storage.js     # 本地存储
│   ├── styles/            # 样式文件
│   │   ├── variables.scss # 样式变量
│   │   ├── mixins.scss    # 样式混入
│   │   └── global.scss    # 全局样式
│   ├── router/            # 路由配置
│   │   └── index.js
│   ├── App.vue            # 根组件
│   └── main.js            # 入口文件
├── android/               # Android APP文件
├── ios/                   # iOS APP文件
├── capacitor.config.ts    # Capacitor配置
├── vite.config.js         # Vite配置
├── tailwind.config.js     # Tailwind配置
└── package.json
```

## 🎨 UI设计规范

### 设计理念
- **简约现代**: 界面干净简洁，突出核心功能
- **科技感**: 使用渐变色、毛玻璃效果、微动画
- **品牌特色**: 独特的配色方案和图标设计
- **移动优先**: 专为手机端设计，大按钮、大字体

### 配色方案
```scss
// 主色调 - 科技蓝紫渐变
$primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
$primary-color: #667eea;
$secondary-color: #764ba2;

// 辅助色
$success-color: #10b981;
$warning-color: #f59e0b;
$error-color: #ef4444;
$info-color: #3b82f6;

// 中性色
$bg-primary: #ffffff;
$bg-secondary: #f8fafc;
$bg-dark: #1e293b;
$text-primary: #1e293b;
$text-secondary: #64748b;
$text-light: #94a3b8;

// 边框和阴影
$border-color: #e2e8f0;
$shadow-light: 0 1px 3px rgba(0, 0, 0, 0.12);
$shadow-medium: 0 4px 12px rgba(0, 0, 0, 0.15);
$shadow-heavy: 0 8px 25px rgba(0, 0, 0, 0.2);
```

### 字体规范
```scss
// 字体大小
$font-xs: 0.75rem;    // 12px
$font-sm: 0.875rem;   // 14px
$font-base: 1rem;     // 16px
$font-lg: 1.125rem;   // 18px
$font-xl: 1.25rem;    // 20px
$font-2xl: 1.5rem;    // 24px
$font-3xl: 1.875rem;  // 30px

// 字重
$font-normal: 400;
$font-medium: 500;
$font-semibold: 600;
$font-bold: 700;
```

### 圆角和间距
```scss
// 圆角
$radius-sm: 0.25rem;   // 4px
$radius-md: 0.5rem;    // 8px
$radius-lg: 0.75rem;   // 12px
$radius-xl: 1rem;      // 16px
$radius-2xl: 1.5rem;   // 24px

// 间距
$space-xs: 0.25rem;    // 4px
$space-sm: 0.5rem;     // 8px
$space-md: 1rem;       // 16px
$space-lg: 1.5rem;     // 24px
$space-xl: 2rem;       // 32px
$space-2xl: 3rem;      // 48px
```

## 📱 页面设计详细说明

### 1. 首页 (Home.vue)
**功能**: 链接输入和解析

**设计要点**:
- 顶部品牌Logo和标语
- 中央大输入框（支持粘贴板检测）
- 底部支持平台展示
- 背景使用渐变 + 几何图形装饰

**交互流程**:
```
用户进入 → 自动检测粘贴板 → 输入链接 → 点击解析 → 跳转预览页
```

### 2. 视频预览页 (VideoPreview.vue)
**功能**: 视频信息展示和操作选择

**设计要点**:
- 视频封面 + 播放按钮
- 视频信息卡片（标题、时长、作者）
- 三个主要操作按钮：下载、转文案、取消
- 底部进度条（任务进行时显示）

**状态管理**:
- pending: 显示loading
- completed: 显示操作按钮
- failed: 显示错误信息

### 3. 文案结果页 (TextResult.vue)
**功能**: 展示转文案结果和AI优化

**设计要点**:
- 原始文案展示区域
- AI优化按钮
- 优化后文案对比展示
- 复制、分享、保存按钮

### 4. 历史记录页 (History.vue)
**功能**: 查看历史任务记录

**设计要点**:
- 时间线式布局
- 任务状态标识
- 快速重新操作按钮

## 🔧 核心组件设计

### LinkInput 组件
```vue
<template>
  <div class="link-input">
    <div class="input-wrapper">
      <input 
        v-model="linkUrl"
        type="text"
        placeholder="粘贴或输入视频链接..."
        class="link-input__field"
        @paste="handlePaste"
      />
      <button 
        class="link-input__button"
        @click="handleSubmit"
        :disabled="!isValidUrl"
      >
        解析
      </button>
    </div>
    <div class="supported-platforms">
      <!-- 支持的平台图标 -->
    </div>
  </div>
</template>
```

### VideoCard 组件
```vue
<template>
  <div class="video-card">
    <div class="video-card__thumbnail">
      <img :src="videoInfo.thumbnail" alt="视频封面" />
      <div class="play-button">
        <PlayIcon />
      </div>
    </div>
    <div class="video-card__info">
      <h3 class="title">{{ videoInfo.title }}</h3>
      <div class="meta">
        <span class="author">{{ videoInfo.author }}</span>
        <span class="duration">{{ formatDuration(videoInfo.duration) }}</span>
      </div>
    </div>
  </div>
</template>
```

### ActionButtons 组件
```vue
<template>
  <div class="action-buttons">
    <button 
      class="btn btn-primary btn-large"
      @click="$emit('download')"
    >
      <DownloadIcon />
      下载视频
    </button>
    <button 
      class="btn btn-secondary btn-large"
      @click="$emit('transcribe')"
    >
      <TextIcon />
      转换文案
    </button>
    <button 
      class="btn btn-outline btn-large"
      @click="$emit('cancel')"
    >
      <CancelIcon />
      取消
    </button>
  </div>
</template>
```

## 🔌 API 集成实现

### API 服务封装
```javascript
// services/api.js
import axios from 'axios'

const API_BASE_URL = 'http://47.109.155.18:2222/api'

const api = axios.create({
  baseURL: API_BASE_URL,
  timeout: 30000,
  headers: {
    'Content-Type': 'application/json'
  }
})

// 请求拦截器
api.interceptors.request.use(config => {
  // 显示loading
  return config
})

// 响应拦截器
api.interceptors.response.use(
  response => response.data,
  error => {
    // 错误处理
    return Promise.reject(error)
  }
)

export default api
```

### 视频服务
```javascript
// services/video.js
import api from './api'

export const videoService = {
  // 创建下载任务
  async createDownloadTask(url, platform) {
    return await api.post('/video/download', { url, platform })
  },

  // 查询任务状态
  async getTaskStatus(taskId) {
    return await api.get(`/video/status/${taskId}`)
  },

  // 获取视频文件
  getVideoFileUrl(taskId) {
    return `${API_BASE_URL}/video/file/${taskId}`
  },

  // 转换文案
  async transcribeVideo(taskId) {
    return await api.post(`/video/transcribe/${taskId}`)
  },

  // 获取转文案结果
  async getTranscription(taskId) {
    return await api.get(`/video/transcription/${taskId}`)
  },

  // AI优化文案
  async optimizeText(text) {
    return await api.post('/video/optimize-text', { text })
  },

  // 删除任务
  async deleteTask(taskId) {
    return await api.delete(`/video/clean/${taskId}`)
  }
}
```

## 📦 状态管理

### 任务状态管理
```javascript
// stores/task.js
import { defineStore } from 'pinia'
import { videoService } from '@/services/video'

export const useTaskStore = defineStore('task', {
  state: () => ({
    currentTask: null,
    taskHistory: [],
    loading: false,
    error: null
  }),

  actions: {
    async createTask(url) {
      this.loading = true
      try {
        const result = await videoService.createDownloadTask(url)
        this.currentTask = result.data
        this.addToHistory(result.data)
        return result.data
      } catch (error) {
        this.error = error.message
        throw error
      } finally {
        this.loading = false
      }
    },

    async pollTaskStatus(taskId) {
      const result = await videoService.getTaskStatus(taskId)
      this.currentTask = result.data
      return result.data
    },

    async transcribeTask(taskId) {
      const result = await videoService.transcribeVideo(taskId)
      return result.data
    },

    async optimizeText(text) {
      const result = await videoService.optimizeText(text)
      return result.data
    },

    addToHistory(task) {
      this.taskHistory.unshift(task)
      // 限制历史记录数量
      if (this.taskHistory.length > 50) {
        this.taskHistory = this.taskHistory.slice(0, 50)
      }
    }
  }
})
```

## 📱 移动端 APP 打包

### Capacitor 配置
```typescript
// capacitor.config.ts
import { CapacitorConfig } from '@capacitor/cli'

const config: CapacitorConfig = {
  appId: 'com.linkcopy.app',
  appName: 'Link Copy',
  webDir: 'dist',
  bundledWebRuntime: false,
  plugins: {
    SplashScreen: {
      launchShowDuration: 2000,
      backgroundColor: '#667eea',
      showSpinner: false
    },
    StatusBar: {
      style: 'dark',
      backgroundColor: '#667eea'
    },
    Clipboard: {
      // 剪贴板权限
    }
  }
}

export default config
```

### 打包命令
```bash
# 安装依赖
npm install

# 构建Web应用
npm run build

# 添加平台
npx cap add android
npx cap add ios

# 同步代码到原生平台
npx cap sync

# 在Android Studio中打开
npx cap open android

# 在Xcode中打开
npx cap open ios
```

## 🎯 响应式设计

### 断点设置
```scss
// 移动端优先
$breakpoints: (
  'xs': 0,
  'sm': 576px,
  'md': 768px,
  'lg': 992px,
  'xl': 1200px,
  'xxl': 1400px
);

// 媒体查询混入
@mixin respond-to($breakpoint) {
  @media (min-width: map-get($breakpoints, $breakpoint)) {
    @content;
  }
}
```

### 移动端适配要点
1. **触摸友好**: 按钮最小44px，点击区域足够大
2. **滑动操作**: 支持手势滑动
3. **键盘适配**: 输入时页面自动调整
4. **安全区域**: 适配刘海屏和底部安全区域

## 🔍 性能优化

### 1. 代码分割
```javascript
// 路由懒加载
const routes = [
  {
    path: '/',
    component: () => import('@/views/Home.vue')
  },
  {
    path: '/preview/:taskId',
    component: () => import('@/views/VideoPreview.vue')
  }
]
```

### 2. 图片优化
- 使用WebP格式
- 懒加载
- 压缩处理

### 3. 缓存策略
- API结果缓存
- 本地存储历史记录
- Service Worker缓存

## 🧪 开发调试

### 本地开发环境
```bash
# 启动开发服务器
npm run dev

# 在移动设备上调试
npm run dev -- --host

# 构建生产版本
npm run build

# 预览生产版本
npm run preview
```

### 移动端调试
1. **浏览器调试**: Chrome DevTools移动模式
2. **真机调试**: 使用Capacitor Live Reload
3. **原生调试**: Android Studio / Xcode

## 📋 开发计划

### 第一阶段：基础功能 (1-2周)
- [x] 项目搭建和环境配置
- [ ] 首页链接输入功能
- [ ] 视频预览页面
- [ ] 基础API集成

### 第二阶段：核心功能 (2-3周)
- [ ] 视频下载功能
- [ ] 转文案功能
- [ ] AI优化功能
- [ ] 历史记录

### 第三阶段：优化完善 (1-2周)
- [ ] 移动端APP打包
- [ ] 性能优化
- [ ] 测试和bug修复
- [ ] 上线部署

## 🚀 部署建议

### Web端部署
- 使用Nginx托管静态文件
- 配置HTTPS
- 开启Gzip压缩

### APP端发布
- Android: 打包APK或发布到应用商店
- iOS: 通过App Store发布

---

**开发过程中的重要提醒：**
1. 优先开发移动端体验
2. 注重用户体验和界面美观
3. 及时测试API集成
4. 保持代码整洁和注释完善
5. 定期提交代码到版本控制系统 